{{#section 'head'}}
    <script>
        window.onload = ()=>{
            const inputImage = document.getElementById('inputImage');
            const itemImage = document.querySelector('.poster');
            inputImage.onchange = evt => {
                const [file] = inputImage.files
                console.log(inputImage.files)
                if (file) {
                    itemImage.src = URL.createObjectURL(file)
                }
            }
        }
    </script>
    <style>
        img.poster{
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 50%;
            cursor: pointer;
        }
    </style>
{{/section}}

{{#with item}}
<div style="width: 80%; margin: auto; margin-top: 50px;">
    <form method="post" enctype="multipart/form-data" action="?_csrf={{../csrfToken}}">
        <input type="hidden" name="_csrf" value="{{../csrfToken}}">

        <div>
            <label for="inputImage">
                <img src="{{imageUrl}}" class="poster" />
            </label>

            <input style="display: none;" id="inputImage" type="file" name="imageUrl"/>
        </div>


        <div class="form-group row">
            <label for="name" class="col-sm-2 col-form-label">Name</label>
            <div class="col-sm-10">
                <input type="text" name="name" class="form-control" id="name" value="{{name}}">
            </div>
        </div>
        <div class="input-group mb-3">
            <label for="price" class="col-sm-2 col-form-label">Price</label>
            <input type="number" name="price" step='0.01' min="0" class="form-control" id="price" value="{{price}}">
            <div class="input-group-append">
                <span class="input-group-text">z≈Ç.</span>
            </div>
        </div>
        <div class="form-group row">
            <label for="description" class="col-sm-2 col-form-label">Description</label>
            <div class="col-sm-10">
                <textarea class="form-control" name="description" id="exampleFormControlTextarea1" rows="3">{{description}}</textarea>
            </div>
        </div>


        <button type="submit" class="btn btn-primary" style="float: right; font-size: 20px;">
              {{{ternary ../edit 
                '<i class="fas fa-edit"></i> Edit' 
                '<i class="bi bi-plus" style="font-size: 24px;"></i> Create'}}}
        </button>
    </form>
</div>
{{/with}}
